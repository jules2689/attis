#!/usr/bin/env ruby

if ARGV[0] == "list"
  puts 'Available templates'
  puts '===================='
  Dir['servers/*.json'].each do |dir|
    puts File.basename(dir, ".json")
  end
else
  env = { "DIGITALOCEAN_API_TOKEN" => ENV['DIGITALOCEAN_API_TOKEN'] }
  system(env, "cd servers && packer build #{ARGV[0]}.json")
end
